<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   width="985"
   height="520"
   version="1.0">

<title>Map</title>

<desc>Plateau du Jeu de RiskOnline</desc>
	
<style type="text/css" id="style_css_sheet">

	#all{
<!--
	ici on remplit avec une couleur
-->
		fill:#FFFFFF;fill-opacity:1;fill-rule:evenodd;
<!--
		ici on change la couleur des bordures
-->
		stroke:#000000;stroke-width:2px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1
	}
	
	#path{
		fill:#000000;stroke:none;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:4,1;stroke-dashoffset:0;
	}
	
	.troops {
		fill:#FFFFFF;
		fill-opacity:1;
		fill-rule:evenodd;
		stroke: #000;
		font-size:12px;
		text-anchor:middle;
	}
	
	<!-- BEGIN LOOP styles -->
		{$styles.style_name} {
			{$styles.style_code}
		}
	<!-- END LOOP -->
</style>

<g id="Mer">
	<rect width="750" height="520"/> 
</g>

<g id="all" transform="translate(-167.99651,-118.55507)">
	<!-- BEGIN LOOP territories -->
	<g class="{$territories.cou_name} territory player_{$territories.m_id}">
		<path class="{$territories.con_name} player_{$territories.m_id}" id="{$territories.cou_name}" d="{$territories.cou_d}" />
	</g>
	<!-- END LOOP -->
</g>

<script type="text/javascript">
<![CDATA[
	function isClass(obj, className) {
		return (obj.getAttributeNS(null,"class").indexOf(className) != -1);
	}

	function $(id) {
		return document.getElementById(id);
	}
	
	adjacent = new Array();
	<!-- BEGIN LOOP adjacents -->
	adjacent.push(new Array('{$adjacents.from|parse_simple}', '{$adjacents.to|parse_simple}'));
	<!-- END LOOP -->
	
	from=null;
	function territory_click (event) {
		id = event.target.getAttributeNS(null,"id");
		
		if( from == null && isClass($(id), 'player_{$m_id}') )
		{
			from = id;
			alert('from : '+from);
		}
		else if( from != null )
		{
			// check
			check = false;
			
			for(var i=0; i<adjacent.length; i++)
			{
				if( ( adjacent[i][0] == from && adjacent[i][1] == id ) || ( adjacent[i][0] == id && adjacent[i][1] == from ))
				{
					check = true;
				}
			}
			
			if( check )
			{
				alert('from : '+from+' to '+id);
				from = null;
			}
			else
			{
				alert('no link');
				from = null;
			}
		}
	}
	
	function install() {
		var terr = document.getElementsByTagName('g');
	
		for(var i=0; i<terr.length; i++)
		{
			if( terr[i].id == 'all' ) continue;
			
			terr[i].addEventListener('click', territory_click, false);
		}
	}
	
	install();
]]>
</script>

</svg>
